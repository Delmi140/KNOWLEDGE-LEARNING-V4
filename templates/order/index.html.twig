{% extends 'base.html.twig' %}

{% block title %}Création de la commande{% endblock %}

{% block body %}



<nav class="navbar navbar-expand-lg custom-navbar">
  <div class="container-fluid">
    <a class="navbar-brand" href="http://127.0.0.1:8000/">
      <img class="custom-image" src={{asset('media/logo.jpg')}}>
    </a>
    <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link" href="http://127.0.0.1:8000/">Accueil</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="http://127.0.0.1:8000/product">Boutique</a>
        </li>
      </ul>
    </div>
  </div>
</nav>





<main class= "page-wrapper">
  <div class= "container position-relative zindex-2 pt-5 pb-lg-5 pb-md-4 pb-2">
    <h1 class="h1-order">Création de la commande</h1>
    
  <div>
  
  <div class= "container position-relative zindex-2 pt-5 pb-lg-5 pb-md-4 pb-2">
    
    
      <div class="row">
        <div class="col-lg-12 offset-lg-1 pt-1">
          <h2 class="pb-2 pt-md-2 my-4 mt-lg-5" id="h2-order">Récapitulatif de la commande <span class='fs-base fw-normal text-muted'>({{ recapCart|length }} produits)</span></h2>
          {% set total = null %}  
          {% for item in recapCart %}
          {% set total = total + (item.entity.price * item.quantity) %}
            

          <div class="d-sm-flex align-items-center border-top py-4">
        
          <div class="w-100 pt-1 ps-sm-4">
            <div class="card col-md-6 col-lg-4" style="width: 50rem;">
              
              <div class="card-body">
                <h5 class="h5-order">Nom: {{item.entity.name}} </h5>
                <p class="p-order">Réference: {{item.entity.slug}}</p>
                <p class="p-order"> Quantité: {{item.quantity}}</p>
                
              </div>
              <div class="text-end ms-auto">
                <div class="fs-5 mb-2" id="p-order">Prix: {{ (item.entity.price / 100)|number_format(2, ',')  }} €</div>
                
              </div>
            </div>

          </div>
        </div>
        {% endfor %}
        <div class="text-end ms-auto">
          <h3 class="h5-order">Total : {{ (total / 100)|number_format(2, ',') }} €</h3>
        </div>
        <div class="text-end ms-auto">
          <a class="nav-link" href="http://127.0.0.1:8000/order/create-session-stripe"><button class="btn btn-lg btn-primary " id="btn-order">PAYER PAR STRIPE | {{ (total / 100)|number_format(2, ',') }}  €</button></a>
        </div>
        
      </div>
    </div>
  </div>






  
  
    
    

</main>

<footer>
    <div>
        <p class="p-footer">Nom de la société : Knowledge</p>
        <p class="p-footer">Adresse : 76 rue de Paris, 75011 PARIS, France</p>
        <p class="p-footer">Téléphone: 01 46 75 33 99 77</p>
        <p class="p-footer">Adresse de contact : nowledge@blabla.com</p>
    </div>
</footer>




{% endblock %}
